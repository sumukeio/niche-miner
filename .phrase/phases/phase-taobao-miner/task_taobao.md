# Task Tracker: Taobao Miner

## 核心功能开发

- task050 [x] **Schema更新**: 在 Supabase `keywords` 表添加 `source`, `taobao_sales`, `taobao_price` 字段。 (验证: Supabase 后台看到新字段) - ✅ 已完成 SQL: `task050_schema.sql`
- task051 [x] **脚本脚手架**: 创建 `taobao_miner.py`，配置 Playwright 环境，实现 `save_cookies` 和 `load_cookies` 功能。 (验证: 运行脚本能弹出淘宝登录页，扫码后能生成 auth_taobao.json) - ✅ 已完成: 文件 `taobao_miner.py`
- task052 [x] **核心抓取逻辑**: 实现搜索、翻页、提取商品列表功能，包含随机等待防爬逻辑。 (验证: 输入关键词，能在控制台打印出抓取到的商品List) - ✅ 已完成
- task053 [x] **数据清洗与入库**: 实现销量过滤逻辑，并将合法数据写入 Supabase 数据库。 (验证: 运行脚本后，Dashboard 能看到 source=taobao 的新数据) - ✅ 已完成
- task054 [x] **API 集成**: 在 Next.js 创建 `/api/taobao-miner` 路由，支持前端触发脚本并 SSE 回传日志。 (验证: 前端点击按钮能启动抓取) - ✅ 已完成

## 工作流重新设计（新增需求）

> 📋 详细需求文档: `需求_工作流重新设计.md`

- task055 [x] **工作流页面重构**: 创建 `/project/[id]/workflow` 统一工作流页面，整合四个步骤（数据获取、清洗、看板、验证） - ✅ 已完成
- task056 [x] **Step 0 数据获取组件**: 创建 `StepDataAcquisition` 组件，支持切换"导入5118表格"和"淘宝挖掘"两种方式 - ✅ 已完成
- task057 [x] **Step 3 广告验证组件**: 创建 `StepAdValidation` 组件，整合百度广告验证到工作流 - ✅ 已完成
- task058 [x] **工作流进度条**: 实现可视化进度指示器，显示步骤状态和进度 - ✅ 已完成
- task059 [x] **工作台优化**: 重新设计工作台，显示项目进度，优化创建项目流程 - ✅ 已完成
- task060 [x] **步骤自动判断**: 实现智能判断项目当前应显示哪个步骤的逻辑 - ✅ 已完成

## 功能增强（基于参考项目学习）

- task061 [x] **F3.1 验证码处理优化**: 改进验证码检测和处理流程（更准确的元素检测、友好的用户提示、超时处理优化） - ✅ 已完成
- task062 [x] **F3.4 网络异常重试机制**: 实现自动重试（最多3次）、指数退避策略（1s/2s/4s）、详细错误日志 - ✅ 已完成
- task063 [x] **F3.5 Cookies失效自动处理**: 检测失效（重定向到登录页）、自动提示用户、记录失效账号 - ✅ 已完成
- task064 [x] **F2.1 价格筛选**: 添加价格区间筛选（最小/最大价格）、价格筛选开关、筛选逻辑实现、前端UI - ✅ 已完成
- task065 [x] **F2.2 关键词筛选**: 实现必须包含/不能包含关键词筛选（AND/OR逻辑）、前端UI支持多关键词输入 - ✅ 已完成
- task066 [x] **F2.3 店铺类型筛选**: 识别C店/天猫店铺类型、筛选逻辑实现、前端UI单选按钮 - ✅ 已完成